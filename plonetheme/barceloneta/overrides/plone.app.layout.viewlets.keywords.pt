<section i18n:domain="plone"
         id="category"
         tal:define="categories context/Subject|nothing;
                     url_quote nocall:modules/Products.PythonScripts.standard/url_quote"
         tal:condition="categories">

  <div class="font-weight-bold d-inline-block mr-2">
    <span translate="category_viewlet_title">Categories</span>
  </div>

  <tal:repeat tal:repeat="category categories">
    <a href="#" rel="nofollow" class="badge badge-secondary p-2 mr-2 mb-3"
       tal:define="quotedCat python:url_quote(category)"
       tal:attributes="href string:${context/@@plone_portal_state/navigation_root_url}/@@search?Subject%3Alist=${quotedCat}">
      <span tal:content="category"></span>
    </a>
  </tal:repeat>

</section>
